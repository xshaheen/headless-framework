{
	"project": "headless-framework",
	"branchName": "xshaheen/feat-direct-publisher",
	"description": "Add IDirectPublisher interface for fire-and-forget messaging with topic mapping",
	"userStories": [
		{
			"id": "US-001",
			"title": "Create IDirectPublisher interface in Abstractions",
			"description": "Create new IDirectPublisher interface with 2 PublishAsync methods using topic mapping",
			"size": "S",
			"acceptanceCriteria": [
				"IDirectPublisher interface exists in Headless.Messaging.Abstractions",
				"PublishAsync<T>(T contentObj, CancellationToken ct) where T : class method exists",
				"PublishAsync<T>(T contentObj, IDictionary<string, string?> headers, CancellationToken ct) where T : class method exists",
				"XML documentation with fire-and-forget warnings included",
				"Exception documentation for ArgumentNullException, InvalidOperationException, and PublisherSentFailedException"
			],
			"priority": 1,
			"passes": true,
			"notes": "Topic resolved from type mapping, no explicit topic parameter"
		},
		{
			"id": "US-002",
			"title": "Create DirectPublisher implementation in Core",
			"description": "Implement DirectPublisher class that resolves topic from type mapping and sends directly to transport",
			"size": "M",
			"acceptanceCriteria": [
				"DirectPublisher class exists in Headless.Messaging.Core/Internal",
				"Injects ISerializer, ITransport, ILongIdGenerator, TimeProvider, MessagingOptions",
				"Resolves topic from MessagingOptions.TopicMappings",
				"Falls back to MessagingOptions.Conventions.GetTopicName",
				"Throws InvalidOperationException when no topic mapping exists",
				"Throws ArgumentNullException when message is null",
				"Applies TopicNamePrefix from MessagingOptions",
				"Generates standard headers (MessageId, CorrelationId, SentTime, MessageName)",
				"Throws PublisherSentFailedException on transport failure",
				"Tracing events emitted (BeforeSend, AfterSend, ErrorSend)",
				"Tracing failures do not mask original exception"
			],
			"priority": 2,
			"passes": true,
			"notes": ""
		},
		{
			"id": "US-003",
			"title": "Register IDirectPublisher in DI",
			"description": "Add IDirectPublisher registration to messaging service collection extensions",
			"size": "XS",
			"acceptanceCriteria": [
				"IDirectPublisher registered as scoped service",
				"Uses TryAddScoped to allow user override",
				"Registration happens in AddMessaging extension method"
			],
			"priority": 3,
			"passes": true,
			"notes": ""
		},
		{
			"id": "US-004",
			"title": "Unit tests for DirectPublisher",
			"description": "Write unit tests covering topic resolution, error scenarios, and header generation",
			"size": "M",
			"acceptanceCriteria": [
				"Test: should_resolve_topic_from_mapping",
				"Test: should_throw_when_no_topic_mapping",
				"Test: should_throw_when_message_is_null",
				"Test: should_apply_topic_prefix",
				"Test: should_throw_on_transport_failure",
				"Test: should_generate_standard_headers"
			],
			"priority": 4,
			"passes": true,
			"notes": ""
		},
		{
			"id": "US-005",
			"title": "Integration test with InMemoryQueue",
			"description": "End-to-end test verifying DirectPublisher works with real transport",
			"size": "M",
			"acceptanceCriteria": [
				"Integration test with InMemoryQueue transport",
				"Verify message received by consumer",
				"Verify topic resolved correctly from mapping"
			],
			"priority": 5,
			"passes": true,
			"notes": ""
		},
		{
			"id": "US-006",
			"title": "Update package README with examples",
			"description": "Add usage examples showing topic mapping configuration and IDirectPublisher usage",
			"size": "S",
			"acceptanceCriteria": [
				"README shows topic mapping configuration for metrics/telemetry messages",
				"README explains when to use IOutboxPublisher vs IDirectPublisher",
				"README shows constructor injection pattern with both interfaces",
				"README documents error handling differences"
			],
			"priority": 6,
			"passes": true,
			"notes": ""
		}
	],
	"passes": true,
	"validation_errors": []
}
