{
	"project": "headless-framework",
	"branchName": "xshaheen/feat-messaging-test-harness",
	"description": "Add Full-Stack Messaging Test Harness",
	"userStories": [
		{
			"id": "US-001",
			"title": "Create TransportCapabilities flags class",
			"description": "Feature detection for transport-specific tests (SupportsOrdering, SupportsDeadLetter, SupportsPriority, SupportsDelayedDelivery)",
			"size": "S",
			"acceptanceCriteria": [
				"TransportCapabilities class with boolean flags for each capability",
				"Default static instance with all flags false"
			],
			"priority": 1,
			"passes": false,
			"notes": "Phase 1.1"
		},
		{
			"id": "US-002",
			"title": "Create TransportTestsBase with core test methods",
			"description": "Abstract base class with 10-12 virtual test methods covering send, headers, error handling, batch, dispose",
			"size": "M",
			"acceptanceCriteria": [
				"Abstract GetTransport() method",
				"Virtual Capabilities property",
				"At least 10 test methods: send, send with headers, send batch, error propagation, dispose cleanup, cancellation",
				"All tests use AbortToken and proper async disposal"
			],
			"priority": 1,
			"passes": false,
			"notes": "Phase 1.2 - Core of the harness"
		},
		{
			"id": "US-003",
			"title": "Create ConsumerClientTestsBase with test methods",
			"description": "Abstract base class with 8-10 virtual test methods for consumer client behavior",
			"size": "M",
			"acceptanceCriteria": [
				"Abstract GetConsumerClient() method",
				"At least 8 test methods: subscribe, listen callback, commit, reject, fetch topics, graceful shutdown",
				"All tests use AbortToken and proper async disposal"
			],
			"priority": 1,
			"passes": false,
			"notes": "Phase 1.3"
		},
		{
			"id": "US-004",
			"title": "Create DataStorageTestsBase with test methods",
			"description": "Abstract base class with 12-15 virtual test methods for storage implementations",
			"size": "M",
			"acceptanceCriteria": [
				"Abstract GetStorage() and GetInitializer() methods",
				"At least 12 test methods: store published, store received, change state, get messages, lock/unlock, initialize schema",
				"State transition tests cover all valid StatusName transitions"
			],
			"priority": 1,
			"passes": false,
			"notes": "Phase 1.4"
		},
		{
			"id": "US-005",
			"title": "Create shared test fixtures",
			"description": "Shared test message types and test subscribers for use across all test classes",
			"size": "S",
			"acceptanceCriteria": [
				"TestMessage record with common properties",
				"TestSubscriber class implementing consumer interface",
				"MessageAssertions helper class"
			],
			"priority": 1,
			"passes": false,
			"notes": "Phase 1.5"
		},
		{
			"id": "US-006",
			"title": "Create MessagingIntegrationTestsBase",
			"description": "Base class for full publish-subscribe cycle tests with DI setup",
			"size": "M",
			"acceptanceCriteria": [
				"Abstract ConfigureMessaging() method for provider setup",
				"Full pub-sub cycle tests",
				"DI container setup with transport and storage"
			],
			"priority": 2,
			"passes": false,
			"notes": "Phase 2.1"
		},
		{
			"id": "US-007",
			"title": "Add consumer discovery tests",
			"description": "Verify IConsumerRegistry integration and consumer discovery",
			"size": "S",
			"acceptanceCriteria": [
				"Test that consumers are discovered from DI",
				"Test that consumer handlers are invoked on message"
			],
			"priority": 2,
			"passes": false,
			"notes": "Phase 2.2"
		},
		{
			"id": "US-008",
			"title": "Add concurrent consumer tests",
			"description": "Test multiple consumers competing for messages",
			"size": "M",
			"acceptanceCriteria": [
				"Test with 2-3 concurrent consumers",
				"Verify all messages processed (at-least-once semantics)",
				"Verify no message lost"
			],
			"priority": 2,
			"passes": false,
			"notes": "Phase 2.3"
		},
		{
			"id": "US-009",
			"title": "Create RabbitMqTransportTests inheriting from harness",
			"description": "Proof of pattern - migrate RabbitMQ transport tests to use harness",
			"size": "S",
			"acceptanceCriteria": [
				"Override GetTransport() to return RabbitMqTransport",
				"Expose all base tests via [Fact] overrides",
				"All tests pass"
			],
			"priority": 3,
			"passes": false,
			"notes": "Phase 3.1 - Proof of pattern"
		},
		{
			"id": "US-010",
			"title": "Create RabbitMqConsumerClientTests inheriting from harness",
			"description": "Migrate RabbitMQ consumer client tests to use harness",
			"size": "S",
			"acceptanceCriteria": [
				"Override GetConsumerClient() to return RabbitMQ consumer",
				"Expose all base tests via [Fact] overrides",
				"All tests pass"
			],
			"priority": 3,
			"passes": false,
			"notes": "Phase 3.2"
		},
		{
			"id": "US-011",
			"title": "Document pattern in harness README",
			"description": "Guide for adding new provider tests",
			"size": "S",
			"acceptanceCriteria": [
				"README explains how to create tests for new transport",
				"README explains how to create tests for new storage provider",
				"README explains which tests are mandatory vs optional"
			],
			"priority": 3,
			"passes": false,
			"notes": "Phase 3.3"
		},
		{
			"id": "US-012",
			"title": "Migrate AWS SQS tests to harness",
			"description": "Update existing SQS tests to inherit from harness base classes",
			"size": "S",
			"acceptanceCriteria": [
				"SQS transport tests inherit from TransportTestsBase",
				"SQS consumer tests inherit from ConsumerClientTestsBase",
				"All existing tests continue to pass"
			],
			"priority": 4,
			"passes": false,
			"notes": "Phase 4.1"
		},
		{
			"id": "US-013",
			"title": "Migrate Azure Service Bus tests to harness",
			"description": "Update existing Azure SB tests to inherit from harness base classes",
			"size": "S",
			"acceptanceCriteria": [
				"Azure SB tests inherit from harness base classes",
				"All existing tests continue to pass"
			],
			"priority": 4,
			"passes": false,
			"notes": "Phase 4.2"
		},
		{
			"id": "US-014",
			"title": "Migrate Kafka tests to harness",
			"description": "Update existing Kafka tests to inherit from harness base classes",
			"size": "S",
			"acceptanceCriteria": [
				"Kafka tests inherit from harness base classes",
				"All existing tests continue to pass"
			],
			"priority": 4,
			"passes": false,
			"notes": "Phase 4.3"
		},
		{
			"id": "US-015",
			"title": "Migrate NATS tests to harness",
			"description": "Update existing NATS tests to inherit from harness base classes",
			"size": "S",
			"acceptanceCriteria": [
				"NATS tests inherit from harness base classes",
				"All existing tests continue to pass"
			],
			"priority": 4,
			"passes": false,
			"notes": "Phase 4.4"
		},
		{
			"id": "US-016",
			"title": "Migrate Pulsar tests to harness",
			"description": "Update existing Pulsar tests to inherit from harness base classes",
			"size": "S",
			"acceptanceCriteria": [
				"Pulsar tests inherit from harness base classes",
				"All existing tests continue to pass"
			],
			"priority": 4,
			"passes": false,
			"notes": "Phase 4.5"
		},
		{
			"id": "US-017",
			"title": "Migrate Redis Streams tests to harness",
			"description": "Update existing Redis Streams tests to inherit from harness base classes",
			"size": "S",
			"acceptanceCriteria": [
				"Redis Streams tests inherit from harness base classes",
				"All existing tests continue to pass"
			],
			"priority": 4,
			"passes": false,
			"notes": "Phase 4.6"
		},
		{
			"id": "US-018",
			"title": "Migrate PostgreSQL storage tests to harness",
			"description": "Update existing PostgreSQL storage tests to inherit from DataStorageTestsBase",
			"size": "S",
			"acceptanceCriteria": [
				"PostgreSQL storage tests inherit from DataStorageTestsBase",
				"All existing tests continue to pass"
			],
			"priority": 4,
			"passes": false,
			"notes": "Phase 4.7"
		},
		{
			"id": "US-019",
			"title": "Migrate SQL Server storage tests to harness",
			"description": "Update existing SQL Server storage tests to inherit from DataStorageTestsBase",
			"size": "S",
			"acceptanceCriteria": [
				"SQL Server storage tests inherit from DataStorageTestsBase",
				"All existing tests continue to pass"
			],
			"priority": 4,
			"passes": false,
			"notes": "Phase 4.8"
		}
	],
	"passes": true,
	"validation_errors": []
}
